<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sky</title>
    <link rel="stylesheet" href="style.css">
</head>
<body onload="display_ct()">
    <div class="moon orb"></div>
    <div class="starts">
        <div class="stars">
            <!-- TOO MUCH STAR1 -->
            <!-- <div class="star1 star"></div> -->
            <div class="star2 star"></div>
            <div class="star3 star"></div>
            <div class="star4 star"></div>
            <div class="star5 star"></div>
        </div>
    </div>
    <!-- SUNSET SUNRISE -->
    <div class="sun orb"></div>
    <div class="cloud">
        <div class="cloud1 clouds"></div>
        <div class="cloud2 clouds"></div>
        <div class="cloud3 clouds"></div>
        <div class="cloud4 clouds"></div>
    </div>
    <button id="daybtn">Nappal</button>
    <button id="nightbtn">Ã‰jszaka</button>
    <span id="ct"></span>

    <script src="app.js"></script>
    <script>
        const nodemailer = require('nodemailer');

        exports.handler = function(event, context, callback) {
            let transporter = nodemailer.createTransport({
                host: 'smtp.gmail.com',
                port: 465,
                secure: true,
                auth: {
                    type: 'OAuth2',
                    user: process.env.MAIL_LOGIN,
                    clientId: process.env.CLIENT_ID,
                    clientSecret: process.env.CLIENT_SECRET,
                    refreshToken: process.env.REFRESH_TOKEN,
                    accessToken: process.env.ACCESS_TOKEN
                }
            });
            console.log(event.body);

            transporter.sendMail({
                from: process.env.MAIL_LOGIN,
                to: process.env.MAIL_TO,
                subject: process.env.SUBJECT + new Date().toLocaleString(),
                text: event.body
            }, function(error, info) {
                if (error) {
                    callback(error);
                } else {
                    callback(null, {
                        statusCode: 200,
                        body: "Ok"
                    });
                }
            });
        }
    </script>
</body>
</html>